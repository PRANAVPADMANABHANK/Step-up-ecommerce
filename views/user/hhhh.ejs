<div class="hero-wrap hero-bread" style="background-image: url('images/bg_6.jpg');">
    <div class="container">
      <div class="row no-gutters slider-text align-items-center justify-content-center">
        <div class="col-md-9 ftco-animate text-center">
          <!-- <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Home</a></span> <span>Cart</span></p> -->
          <h1 class="mb-0 bread">My Shop</h1>
        </div>
      </div>
    </div>
  </div>
  
  <!DOCTYPE html>
  <html>
  
  <head>
    <!-- Add custom CSS for checkbox styling -->
    <style>
      .custom-checkbox .custom-control-label::before {
        border: 2px solid #007bff;
        border-radius: 0.25rem;
      }
  
      .custom-checkbox .custom-control-input:checked~.custom-control-label::before {
        background-color: #007bff;
        border-color: #007bff;
      }
  
      .custom-checkbox .custom-control-input:focus~.custom-control-label::before {
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
      }
  
      /* Custom styles for checkbox text labels */
      .custom-control-label {
        padding-left: 1.5rem;
        position: relative;
      }
  
      .custom-control-label::before {
        content: "";
        display: block;
        position: absolute;
        left: 0;
        top: 0.25rem;
        width: 1rem;
        height: 1rem;
        border-radius: 0.25rem;
        background-color: #fff;
        border: 2px solid #007bff;
      }
  
      .custom-control-input:checked~.custom-control-label::before {
        background-color: #007bff;
        border-color: #007bff;
        content: "\2713";
        /* Add the checkmark symbol */
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1rem;
        font-weight: bold;
      }
  
      .card {
        max-width: 400px;
      }
      .card {
    margin-bottom: 20px;
  }
    </style>
  </head>
  
  <body>
    <div class="container mt-5">
      <div class="row">
        <div class="col-md-3">
          <h5><b>FILTERS</b></h5>
          <form id="filter-form">
            <!-- <div class="form-group">
              <label for="category">Category:</label>
              <% categories.forEach((element, index)=> { %>
                <div class="custom-control custom-checkbox">
                  <input class="custom-control-input" name="categories" type="checkbox" value="<%= element._id %>"
                    id="categoryMen<%= index %>" onclick="toggleFilterProducts('<%= element._id %>', this)">
                  <label class="custom-control-label" for="categoryMen<%= index %>">
                    <%= element.category %>
                  </label><br>
                </div>
                <% }) %>
            </div> -->
            <div class="form-group">
              <label for="category">Category:</label>
              <% categories.forEach((element, index) => { %>
                <div class="custom-control custom-checkbox">
                  <input class="custom-control-input" name="categories" type="checkbox" value="<%= element._id %>"
                    id="categoryMen<%= index %>" onclick="toggleFilterProducts('<%= element._id %>', this)">
                  <label class="custom-control-label" for="categoryMen<%= index %>">
                    <%= element.category %>
                  </label><br>
                </div>
              <% }) %>
            </div>
            <div class="form-group">
              <label for="subcategory">Brands:</label>
              <% subcategories.forEach((element, index)=> { %>
                <div class="custom-control custom-checkbox">
                  <input class="custom-control-input" type="checkbox" value="sneakers"
                    id="subcategorySneakers<%= index %>" onclick="filterProducts('<%= element.sub_category %>')">
                  <label class="custom-control-label" for="subcategorySneakers<%= index %>">
                    <%= element.sub_category %>
                  </label><br>
                </div>
                <% }) %>
            </div>
          </form>
        </div>
        <div class="col-md-6">
          <!-- Response container -->
          <div id="response-container"></div>
        </div>
  
      </div>
    </div>
  </body>
  <br><br><br>
  
  
  <script>
  
  const checkboxes = document.querySelectorAll('input[type="checkbox"][name="categories"]');
    checkboxes.forEach((checkbox) => {
      checkbox.addEventListener('change', () => {
        if (checkbox.checked) {
          checkboxes.forEach((otherCheckbox) => {
            if (otherCheckbox !== checkbox) {
              otherCheckbox.checked = false;
            }
          });
        }
      });
    });
  
  
  
    function toggleFilterProducts(categoryId, checkbox) {
      if (checkbox.checked) {
        console.log(`Selected category id: ${categoryId}`);
        $('.product[data-category="' + categoryId + '"]').show();
      } else {
        console.log(`Deselected category id: ${categoryId}`);
        $('.product[data-category="' + categoryId + '"]').hide();
      }
      // make an AJAX request to the server
      $.ajax({
        type: 'GET',
        url: '/filter/' + categoryId,
        success: function (response) {
          console.log(response);
          var products = response;
          var html = '';
  
          products.forEach(function (product, index) {
    if (index % 3 === 0) {
      html += '<div class="row">';
    }
  
    html += `
      <div class="col-md-4 col-lg-4 mb-4">
        <div class="card h-100" style="width: 800px; margin-bottom: 30px;">
          <div class="card-header bg-primary text-white">${product.company}</div>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">${product.productname}</h5>
            <img class="card-img-top mb-3" src="/uploads/${product.images[1]}" alt="${product.title}">
            <p class="card-text" style="font-weight: bold; font-size: 18px;">â‚¹${product.price}</p>
            <div>${product.type}</div>
            <div class="mt-auto">
              <a href="#" class="btn btn-primary">Buy Now</a>
            </div>
          </div>
        </div>
      </div>
    `;
  
    if ((index + 1) % 3 === 0 || (index + 1) === products.length) {
      html += '</div>';
    }
  });
  
  
  // Add some margin between the card containers
  $('.card').css('margin-bottom', '30px');
  
  
  
  
  
  
  
          // update the contents of the response container with the HTML
          $('#response-container').html(html);
        },
        error: function (xhr, status, error) {
          // handle errors
          console.log(error);
        }
      });
    }
  
  </script>
  
  
  <!-- Add the Bootstrap JS file -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
  
  </html>