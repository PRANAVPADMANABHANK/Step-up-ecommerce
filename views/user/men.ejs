<style>
	.card {
		border-radius: 10px;
		box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.3);
		transition: transform 0.2s ease-in-out;
	}

	.card:hover {
		transform: translateY(-10px);
	}

	.card-img-top {
		border-top-left-radius: 10px;
		border-top-right-radius: 10px;
		object-fit: cover;
		height: 200px;
	}

	.card-body {
		padding: 1.5rem;
		text-align: center;
	}

	.card-title {
		font-size: 1.5rem;
		font-weight: bold;
		margin-bottom: 0.5rem;
	}

	.card-text {
		font-size: 1rem;
		margin-bottom: 1rem;
	}

	.card-link {
		font-size: 1.2rem;
		font-weight: bold;
	}

	.green {
		color: rgb(16, 153, 16);
		font-weight: bold;
		font-size: small;
	}






	.pagination {
		margin: 30px 0;
	}

	.pagination .page-item {
		margin-right: 5px;
		border-radius: 5px;
	}

	.pagination .page-item.active .page-link {
		background-color: #17a2b8;
		border-color: #17a2b8;
	}

	.pagination .page-link {
		color: #17a2b8;
		border-color: #17a2b8;
	}

	.pagination .page-link:hover {
		color: #fff;
		background-color: #17a2b8;
		border-color: #17a2b8;
	}

	.pagination .page-item.disabled .page-link {
		color: #6c757d;
		pointer-events: none;
		background-color: #fff;
		border-color: #6c757d;
	}

	.pagination .page-item.disabled .page-link:hover {
		background-color: #fff;
	}

	.wishlist-btn {
		display: inline-flex;
		align-items: center;
		background-color: transparent;
		border: none;
		padding: 0;
		font-size: 14px;
		text-decoration: none;
		cursor: pointer;
		position: relative;
	}

	.purchase-text {
		margin-right: 5px;
	}

	.heart-icon {
		color: #ff0000;
		font-size: 16px;
		transition: color 0.3s;
	}

	.wishlist-btn:hover .heart-icon {
		color: #ff6347;
	}

	.purchase-btn {
		background-color: #428bca;
		color: #fff;
		border: none;
		padding: 8px 12px;
		border-radius: 4px;
		font-size: 14px;
		text-decoration: none;
	}

	.purchase-btn:hover {
		background-color: #ff9632;
	}

	.purchase-btn:focus {
		outline: none;
	}

	.wishlist-purchase {
		display: flex;
		align-items: center;
	}

	.wishlist-btn {
		display: flex;
		align-items: center;
		justify-content: center;
		background-color: transparent;
		border: none;
		padding: 0;
		margin-left: 10px;
		font-size: 20px;
		color: #ff0000;
		transition: color 0.3s;
	}

	.wishlist-btn:hover {
		color: #ff6347;
	}

	.wishlist-purchase {
		display: flex;
		align-items: center;
	}

	.wishlist-btn {
		position: relative;
		display: flex;
		align-items: center;
		justify-content: center;
		background-color: transparent;
		border: none;
		padding: 0;
		margin-left: 10px;
		cursor: pointer;
		transition: transform 0.3s;
	}

	.wishlist-btn .heart-icon {
		font-size: 24px;
		color: #f85555;
		transition: color 0.3s;
	}



	.wishlist-btn:hover {
		transform: scale(1.2);
	}
</style>
<!-- Add this line in the <head> section of your HTML -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
	integrity="sha512-nkCa6D09Et6N2p7K+YYfDE2x9oNvr9POd2X/3oZxPTT2b79Ol/ljpzYYF5foBnc8V41ewDSsEx2iyh0N9fLUpg=="
	crossorigin="anonymous" referrerpolicy="no-referrer" />
<!-- JavaScript -->
<script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>

<!-- CSS -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css" />
<!-- Default theme -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css" />
<!-- Semantic UI theme -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.min.css" />
<!-- Bootstrap theme -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css" />

<section class="ftco-section bg-light">
	<div class="container mt-5">
		<div class="row">
			<% products.forEach((item)=>{ %>
				<div class="col-md-3 p-3">
					<div class="card">
						<img class="card-img-top" src="/uploads/<%= item.images[1] %>" alt="Card image cap">
						<div class="card-body">
							<h5 class="card-title">
								<%= item.company %>
							</h5>
							<p class="card-text">
								<%= item.productname%>
							</p>
							<h5 class="card-text">
								<%= item.type %>
							</h5>
							<h2 class="card-text green">
								<%= item.deal%>
							</h2>
							<h1 class="card-text" style="font-weight: bold; font-size: 1.2em;">â‚¹<%= item.price%>
							</h1>
							<h2 class="card-text">size <%= item.size%>
							</h2>

							<div class="wishlist-purchase d-flex justify-content-center">
								<a href="/singleProduct/<%= item._id %>" class="card-link btn btn-primary">PURCHASE</a>
								<a id="" type="button"
									onclick="addToWishList('<%= item._id %>');event.stopPropagation();"
									class="wishlist-btn">
									<i class="fas fa-heart heart-icon"></i>
								</a>
							</div>

							<!-- <a href="/singleProduct/<%#=item._id %>" class="card-link btn btn-primary">PURCHASE</a> -->
						</div>
					</div>
				</div>
				<%}) %>
		</div>
	</div>
</section>


<div class="d-flex justify-content-center">
	<nav aria-label="Page navigation example">
		<ul class="pagination justify-content-end">

			<% if (pageNum> 1) { %>
				<li class="page-item">
					<a class="page-link" href="/?page=<%= pageNum - 1 %>">Previous</a>
				</li>
				<% } %>

					<% for (let i=1; i <=pages; i++) { %>
						<li class="page-item <%= i === pageNum ? 'active' : '' %>">
							<a class="page-link" href="/?page=<%= i %>">
								<%= i %>
							</a>
						</li>
						<% } %>

							<% if (pageNum < pages) { %>
								<li class="page-item">
									<a class="page-link" href="/?page=<%= pageNum + 1 %>">Next</a>
								</li>
								<% } %>

		</ul>
	</nav>
</div>

<script>
	function addToWishList(proId) {

		$.ajax({
			url: `/add-to-wishlist/${proId}`,
			method: 'get',
			success: (response) => {
				if (response.status) {
					let wishListCount = $('#wishlist-count').html()
					console.log(wishListCount)
					wishListCount = parseInt(wishListCount) + 1
					console.log(wishListCount)
					$("#wishlist-count").html(wishListCount);

					alertify.set('notifier', 'delay', 2);
					alertify.set('notifier', 'position', 'top-right');
					alertify.success('added to the wishlist');

				} else {

					alertify.set('notifier', 'delay', 2);
					alertify.set('notifier', 'position', 'top-right');
					alertify.error('Already in your wishlist');
				}

			}
		})
	}

	// Disable right-click context menu
document.addEventListener('contextmenu', function(event) {
  event.preventDefault();
});

</script>