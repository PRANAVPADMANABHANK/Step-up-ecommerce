<div class="container">
  <style>
    .add-product-button {
      background-color: green;
      color: rgb(248, 242, 242);
      font-weight: bold;
      border: none;
      padding: 12px 20px;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      float: right; /* add this line */
    }
    table {
    margin-top: 8rem;
  }
 
  </style>
  <!-- <a href="/admin/addProduct">
    <button class="btn btn-success m-3" style="width: fit-content">
      Add Product
    </button>
  </a>
</div> -->

<div class="text-right">
  <a href="">
    <div class="row" style="float: right">
      <a href="/admin/addProduct" class="btn btn-success m-3" style="width: fit-content">Add Product</a>
  </div>
  </a>
</div>



<table class="table table-striped table-dark mt-5">

  <thead>
    <tr style="width: fit-content" >
      <th scope="col">No</th>
      <th scope="col">Company</th>
      <th scope="col">Product Name</th>
      <th scope="col">Category</th>
      <th scope="col">Deal</th>
      <th>Price</th>
      <th>Size</th>
      <th>Option</th>
      <th>Option</th>
    </tr>
  </thead>
  <tbody>
    <% products.forEach((item ,index)=> { %>

    <tr>
      <th scope="row"><%= index+1 %></th>
      <td><%= item.company %></td>
      <td><%= item.productname %></td>
      <td><%= item.category %></td>
      <td><%= item.deal %></td>
      <td><%= item.price %></td>
      <td><%= item.size %></td>
      <td>
        <img
          style="width: 50px; height: 50px"
          src="/uploads/<%= item.images[0] %>"
          alt=""
        />
      </td>
      <td>
        <div style="display: flex;">
          <a href="/admin/editProduct/<%=item._id%>" class="btn btn-primary btn-sm me-3">Edit</a>
          <form action="/admin/deleteProduct/<%=item._id%>?_method=DELETE" id="myForm" method="post"
            class="position-relative">
            <!-- <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm(`Are You Sure Want to Delete <%=item.name%>`)" >
              Delete
            </button></form>
        </div> -->

        

        
        

        <button type="button" class="btn btn-danger btn-sm" onclick="deleteItem()" >Delete Item</button>


        </form>
       
      
      </td>
    </tr>

    <% }) %>
  </tbody>
</table>


<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>   -->

<script>
  document.getElementById("myForm").addEventListener("submit", function(event) {
  event.preventDefault(); // Prevent the default form submission
});
function deleteItem() {
  swal({
    title: "Are you sure?",
    text: "You won't be able to revert this!",
    icon: "warning",
    buttons: true,
    dangerMode: true,
  })
  .then((willDelete) => {
    if (willDelete) {
      // Perform the delete action here
      document.getElementById("myForm").submit();
    }
  });
}
</script>